<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>The Total Differential Value of a phytosociological table — tdv • The 'diffval' package for R</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="The Total Differential Value of a phytosociological table — tdv"><meta name="description" content="Given a phytosociological table and a partition of its columns, this function
calculates the respective Total Differential Value (TDV)."><meta property="og:description" content="Given a phytosociological table and a partition of its columns, this function
calculates the respective Total Differential Value (TDV)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">The 'diffval' package for R</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9002</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://gitlab.com" aria-label="GitLab"><span class="fa fa-gitlab"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.r-project.org" aria-label="R-Project"><span class="fa fab fa-r-project"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://point-veg.gitlab.io/diffval/" aria-label="POINT-VEG packages"><span class="fa fa-home"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>The Total Differential Value of a phytosociological table</h1>
      <small class="dont-index">Source: <a href="https://gitlab.com/point-veg/diffval/-/blob/master/R/tdv.R" class="external-link"><code>R/tdv.R</code></a></small>
      <div class="d-none name"><code>tdv.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given a phytosociological table and a partition of its columns, this function
calculates the respective Total Differential Value (TDV).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tdv</span><span class="op">(</span><span class="va">m_bin</span>, <span class="va">p</span>, output_type <span class="op">=</span> <span class="st">"normal"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-m-bin">m_bin<a class="anchor" aria-label="anchor" href="#arg-m-bin"></a></dt>
<dd><p>A matrix. A phytosociological table of 0s (absences) and 1s
(presences), where rows correspond to taxa and columns correspond to
relevés.</p></dd>


<dt id="arg-p">p<a class="anchor" aria-label="anchor" href="#arg-p"></a></dt>
<dd><p>A vector of integer numbers with the partition of the relevés (i.e.,
a k-partition, consisting in a vector with values from 1 to k, with length
equal to the number of columns of <code>m_bin</code>, ascribing each relevé to one of
the k groups).</p></dd>


<dt id="arg-output-type">output_type<a class="anchor" aria-label="anchor" href="#arg-output-type"></a></dt>
<dd><p>A character determining the amount of information returned
by the function and also the amount of pre-validations. Possible values are
"normal" (the default), "fast" and "full".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If <code>output_type = "normal"</code> (the default) pre-validations are done
and a list is returned, with the following components:</p>
<dl><dt>ifp</dt>
<dd><p>A matrix with the \(\frac{a}{b}\) values for each taxon
in each group, for short called the 'inner frequency of presences'.</p></dd>

<dt>ofda</dt>
<dd><p>A matrix with the \(\frac{c}{d}\) values for each
taxon in each group, for short called the 'outer frequency of
differentiating absences'.</p></dd>

<dt>e</dt>
<dd><p>A vector with the \(e\) values for each taxon, i.e., the
number of groups containing that taxon.</p></dd>

<dt>diffval</dt>
<dd><p>A matrix with the \(DiffVal\) for each taxon.</p></dd>

<dt>tdv</dt>
<dd><p>A numeric with the TDV of matrix <code>m_bin,</code> given the partition
<code>p</code>.</p></dd>


</dl><p>If <code>output_type = "full"</code>, some extra components are added to the output:
<code>afg</code>, <code>empty.size</code>, <code>gct</code> (= \(e\)) and <code>i.mul</code>. These are intermediate
matrices used in the computation of TDV.</p>
<p>If <code>output_type = "fast"</code>, only TDV is returned and no pre-validations are
done.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function accepts a phytosociological table (<code>m_bin</code>) and a
k-partition of its columns (<code>p</code>), returning the corresponding TDV (Monteiro
-Henriques 2025).</p>
<p>TDV was proposed by Monteiro-Henriques and Bellu (2014).
Monteiro-Henriques (2016) proposed TDV1, modifying TDV slightly with the
objective of ensuring a value from 0 to 1. Yet, TDV is always within that
range. In practice, both TDV and TDV1 have 0 as possible minimum value
and 1 as possible maximum value, but TDV1 reduces further the contribution
of differential taxa present in more than one group. TDV is then
implemented here, for parsimony.</p>
<p>TDV is calculated using the \(DiffVal\) index for each (and all) of the
taxa present in a tabulated phytosociological table \(M\) (also called
sorted table). \(DiffVal\) index aims at characterizing how well a taxon
works as a differential taxon in a such tabulated phytosociological table
(for more information on differential taxa see Mueller-Dombois &amp; Ellenberg,
1974).</p>
<p>An archetypal differential taxon of a certain group \(g\) of the
partition \(p\) (a partition on the columns of \(M\)) is the one
present in all relevés of group \(g\), and absent from all the other
groups of that partition. Therefore, \(DiffVal\) has two components, an
inner one (\(\frac{a}{b}\)), which measures the presence of the
taxon inside each of the groups, and an outer one (\(\frac{c}{d}\)),
which measures the relevant absences of the taxon outside of each of the
groups. Specifically, given a partition \(p\) with \(k\) groups,
\(DiffVal\) is calculated for each taxon \(s\) as:</p>
<p>$$DiffVal_{s,p} = \frac{1}{e}\sum_{g=1}^k{\frac{a}{b}\frac{c}{d}}$$
where:</p><ul><li><p>\(a\), is the total number of presences of taxon \(s\) within group
\(g\).</p></li>
<li><p>\(b\), is the total number of relevés of group \(g\).</p></li>
<li><p>\(c\), is the total number of differentiating absences of taxon
\(s\), i.e., absences coming from the groups other than \(g\) from
which the taxon \(s\) is completely absent.</p></li>
<li><p>\(d\), is the total number of relevés of all groups but \(g\) (i.e.,
the total number of relevés in the table - \(b\)).</p></li>
<li><p>\(e\), is the total number of groups in which the taxon \(s\) occurs
at least once.</p></li>
</ul><p>Therefore, for each taxon \(s\) and for each group \(g\), the
\(DiffVal\) index evaluates:</p><ul><li><p>\(\frac{a}{b}\), i.e., the frequency of the presences of taxon
\(s\), relative to the size of group \(g\); commonly called 'relative
frequency.' \(\frac{a}{b}\) is only 1 if and only if taxon \(s\)
occurs in all the relevés of group \(g\).</p></li>
<li><p>\(\frac{c}{d}\), i.e., the frequency of the differentiating
absences of taxon \(s\) outside group \(g\), relative to the sum of
sizes of all groups but \(g\). <em>Nota bene</em>: absences in \(c\) are
counted outside the group \(g\) but only in the groups from which taxon
\(s\) is completely absent (these are the relevant absences, which
produce differentiation among groups); in practice \(c\) corresponds to
the sum of the sizes of all groups other than \(g\) that are empty.
\(\frac{c}{d}\) is 1 if and only if the taxon \(s\) is absent
from all groups but \(g\).</p></li>
</ul><p>Finally, \(\frac{1}{e}\) ensures that \(DiffVal\) is a value
from 0 to 1.</p>
<p>The Total Differential Value (TDV or \(TotDiffVal\)) of a
phytosociological table \(M\) tabulated/sorted by the partition \(p\)
is:</p>
<p>$$TDV_{M,p} = \frac{1}{n}\sum_{i=1}^n{Diffval_{i,p}}$$
where:</p><ul><li><p>\(n\), is the number of taxa in table \(M\).</p></li>
</ul><p>The division by the number of taxa present in \(M\) ensures that TDV
remains in the [0,1] interval (as \(DiffVal\) is also in the same
interval).</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Monteiro-Henriques T, Bellu A. 2014. <em>An optimization approach to the</em>
<em>production of differentiated tables based on new differentiability</em>
<em>measures</em>. 23rd EVS European Vegetation Survey. Presented orally. Ljubljana,
Slovenia.</p>
<p>Monteiro-Henriques T 2016. <em>A bunch of R functions to assist</em>
<em>phytosociological tabulation</em>. 25th Meeting of European Vegetation Survey.
Presented in poster. Rome. Italy.</p>
<p>Monteiro-Henriques T 2025. <em>TDV-optimization: A novel numerical method for</em>
<em>phytosociological tabulation</em>. Vegetation Classification and Survey 6:
99-127. DOI: <a href="https://doi.org/10.3897/VCS.140466" class="external-link">https://doi.org/10.3897/VCS.140466</a></p>
<p>Mueller-Dombois D, Ellenberg H 1974. <em>Aims and Methods of Vegetation</em>
<em>Ecology</em>. New York: John Wiley &amp; Sons.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Tiago Monteiro-Henriques. E-mail: <a href="mailto:tmh.dev@icloud.com">tmh.dev@icloud.com</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Getting the Taxus baccata forests data set</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">taxus_bin</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Creating a group partition, as the one presented in the original article of</span></span></span>
<span class="r-in"><span><span class="co"># the data set</span></span></span>
<span class="r-in"><span><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">11</span>, <span class="fl">19</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Removing taxa occurring in only one relevé, in order to reproduce exactly</span></span></span>
<span class="r-in"><span><span class="co"># the example in the original article of the data set</span></span></span>
<span class="r-in"><span><span class="va">taxus_bin_wmt</span> <span class="op">&lt;-</span> <span class="va">taxus_bin</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">taxus_bin</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1</span>, <span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculating TDV</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">tdv</span><span class="op">(</span><span class="va">taxus_bin_wmt</span>, <span class="va">groups</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This is the TDV</span></span></span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">tdv</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.1958471</span>
<span class="r-in"><span><span class="co"># This is TDV1, reproducing exactly the value from the original article</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">diffval</span> <span class="op">/</span> <span class="va">result</span><span class="op">$</span><span class="va">e</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">taxus_bin_wmt</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.1758473</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tiago Monteiro-Henriques, Jorge Orestes Cerdeira, Fundação para a Ciência e a Tecnologia, Portugal.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

