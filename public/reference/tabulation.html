<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Rearrange a phytosociological table, showing differential taxa on top — tabulation • The 'diffval' package for R</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Rearrange a phytosociological table, showing differential taxa on top — tabulation"><meta name="description" content="This function reorders a phytosociological table rows using, firstly, the
increasing number of groups in which a taxon occurs, and secondly, the
decreasing sum of the inner frequency of presences of each taxon
(see tdv()). The columns are also reordered, simply using the increasing
number of the respective group membership."><meta property="og:description" content="This function reorders a phytosociological table rows using, firstly, the
increasing number of groups in which a taxon occurs, and secondly, the
decreasing sum of the inner frequency of presences of each taxon
(see tdv()). The columns are also reordered, simply using the increasing
number of the respective group membership."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">The 'diffval' package for R</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9002</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://gitlab.com" aria-label="GitLab"><span class="fa fa-gitlab"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.r-project.org" aria-label="R-Project"><span class="fa fab fa-r-project"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://point-veg.gitlab.io/diffval/" aria-label="POINT-VEG packages"><span class="fa fa-home"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Rearrange a phytosociological table, showing differential taxa on top</h1>
      <small class="dont-index">Source: <a href="https://gitlab.com/point-veg/diffval/-/blob/master/R/tabulation.R" class="external-link"><code>R/tabulation.R</code></a></small>
      <div class="d-none name"><code>tabulation.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function reorders a phytosociological table rows using, firstly, the
increasing number of groups in which a taxon occurs, and secondly, the
decreasing sum of the inner frequency of presences of each taxon
(see <code><a href="tdv.html">tdv()</a></code>). The columns are also reordered, simply using the increasing
number of the respective group membership.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tabulation</span><span class="op">(</span></span>
<span>  <span class="va">m_bin</span>,</span>
<span>  <span class="va">p</span>,</span>
<span>  <span class="va">taxa_names</span>,</span>
<span>  plot_im <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  palette <span class="op">=</span> <span class="st">"Vik"</span>,</span>
<span>  greyout <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  greyout_colour <span class="op">=</span> <span class="st">"grey"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-m-bin">m_bin<a class="anchor" aria-label="anchor" href="#arg-m-bin"></a></dt>
<dd><p>A matrix. A phytosociological table of 0s (absences) and 1s
(presences), where rows correspond to taxa and columns correspond to
relevés.</p></dd>


<dt id="arg-p">p<a class="anchor" aria-label="anchor" href="#arg-p"></a></dt>
<dd><p>A vector of integer numbers with the partition of the relevés (i.e.,
a k-partition, consisting in a vector with values from 1 to k, with length
equal to the number of columns of <code>m_bin</code>, ascribing each relevé to one of
the k groups).</p></dd>


<dt id="arg-taxa-names">taxa_names<a class="anchor" aria-label="anchor" href="#arg-taxa-names"></a></dt>
<dd><p>A character vector (with length equal to the number of rows
of <code>m_bin</code>) with the taxa names.</p></dd>


<dt id="arg-plot-im">plot_im<a class="anchor" aria-label="anchor" href="#arg-plot-im"></a></dt>
<dd><p>By default, <code>NULL</code>, returns without plotting. If
<code>plot_im = "normal"</code>, plots an image of the tabulated matrix. If
<code>plot_im = "condensed"</code>, plots an image of the tabulated matrix but
presenting sets of differential taxa as solid coloured blocks.</p></dd>


<dt id="arg-palette">palette<a class="anchor" aria-label="anchor" href="#arg-palette"></a></dt>
<dd><p>A character with the name of the colour palette (one of
<code><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">grDevices::hcl.pals()</a></code> to be passed to <code><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">grDevices::hcl.colors()</a></code>. Defaults
to "Vik".</p></dd>


<dt id="arg-greyout">greyout<a class="anchor" aria-label="anchor" href="#arg-greyout"></a></dt>
<dd><p>A logical. If <code>TRUE</code> (the default), non-differential taxa are
greyed out (using the colour defined by <code>greyout_colour</code>). If <code>FALSE</code>,
non-differential taxa is depicted with the respective group colours.</p></dd>


<dt id="arg-greyout-colour">greyout_colour<a class="anchor" aria-label="anchor" href="#arg-greyout-colour"></a></dt>
<dd><p>A character with the name of the colour to use for
non-differential taxa. Defaults to "grey".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If <code>plot_im = NULL</code>, a list with the following components:</p><dl><dt>taxa.names</dt>
<dd><p>The given <code>taxa_names</code></p></dd>

<dt>taxa.ord</dt>
<dd><p>A vector with the order of the rows/taxa.</p></dd>

<dt>tabulated</dt>
<dd><p>The rearranged/reordered <code>m_bin</code> matrix.</p></dd>

<dt>condensed</dt>
<dd><p>The matrix used to create the "condensed" image.</p></dd>


</dl><p>If <code>plot_im = "normal"</code>, it returns the above list and, additionally, plots
an image of the tabulated matrix.
If <code>plot_im = "condensed"</code>, it returns the above list and, additionally,
plots an image of the tabulated matrix, but presenting the sets of
differential taxa as solid coloured blocks of equal width.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function accepts a phytosociological table (<code>m_bin</code>), a
k-partition of its columns (<code>p</code>) and the names of the taxa (corresponding
to the rows of <code>m_bin</code>), returning a rearranged/reordered matrix (and
plotting optionally).</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Tiago Monteiro-Henriques. E-mail: <a href="mailto:tmh.dev@icloud.com">tmh.dev@icloud.com</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Getting the Taxus baccata forests data set</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">taxus_bin</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Creating a group partition, as presented in the original article of the</span></span></span>
<span class="r-in"><span><span class="co"># data set</span></span></span>
<span class="r-in"><span><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">11</span>, <span class="fl">19</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Removing taxa occurring in only one relevé in order to</span></span></span>
<span class="r-in"><span><span class="co"># reproduce exactly the example in the original article of the data set</span></span></span>
<span class="r-in"><span><span class="va">taxus_bin_wmt</span> <span class="op">&lt;-</span> <span class="va">taxus_bin</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">taxus_bin</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1</span>, <span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sorting the phytosociological table, putting exclusive taxa in the top and</span></span></span>
<span class="r-in"><span><span class="co"># plotting an image of it</span></span></span>
<span class="r-in"><span><span class="va">tabul</span> <span class="op">&lt;-</span> <span class="fu">tabulation</span><span class="op">(</span></span></span>
<span class="r-in"><span>  m_bin <span class="op">=</span> <span class="va">taxus_bin_wmt</span>,</span></span>
<span class="r-in"><span>  p <span class="op">=</span> <span class="va">groups</span>,</span></span>
<span class="r-in"><span>  taxa_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">taxus_bin_wmt</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  plot_im <span class="op">=</span> <span class="st">"normal"</span>,</span></span>
<span class="r-in"><span>  palette <span class="op">=</span> <span class="st">"Zissou 1"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="tabulation-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Inspect the first rows and columns of the reordered phytosociological table</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tabul</span><span class="op">$</span><span class="va">tabulated</span>, n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                              1 2 3 4 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> group                                        1 1 1 2 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Galium aparine L.                            1 1 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Genista florida L.                           1 0 1 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geranium lucidum L.                          1 1 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Phalacrocarpum oppositifolium (Brot.) Willk. 0 1 1 0 0</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tiago Monteiro-Henriques, Jorge Orestes Cerdeira, Fundação para a Ciência e a Tecnologia, Portugal.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

